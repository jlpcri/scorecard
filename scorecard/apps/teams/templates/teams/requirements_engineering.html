{% load staticfiles %}
{% load team_extras %}

{% block headscript %}

<style>

    #requirements_engineering_dnd_div {
        width: 200px;
        height: 25px;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }

    .td_title {
        border: 1px solid lightgray;
        text-align: center;
    }

</style>


{% endblock headscript %}

<div class="tab-content" id="re-content">

    {% if res %}

    <div class="table-responsive">
        <table id="requirements_engineering_table" class="table table-striped table-hover table-condensed table-bordered">
            <thead>
            <tr>
                <th class="col-md-3"><strong>Date</strong></th>
                <th class="col-md-1"><strong>Staffs</strong></th>
                <th class="col-md-2"><strong>Active Projects</strong></th>
                <th class="col-md-2"><strong>Elicitation Analysis</strong></th>
                <th class="col-md-2"><strong>Avg Throughput</strong></th>
                <th class="col-md-2"><strong>Total Costs</strong></th>
            </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>YTD Average</strong></td>
                    <td>{{ res_ytd.staffs.avg|floatformat:2 }}</td>
                    <td>{{ res_ytd.active_projects.avg|floatformat:2 }}</td>
                    <td>{{ res_ytd.elicitation_analysis_time.avg|floatformat:2 }}</td>
                    <td>{{ res_ytd.avg_throughput.avg|floatformat:2 }}</td>
                    <td>{{ res_ytd.total_operational_cost.avg|prepend_dollars }}</td>
                </tr>
                <tr>
                    <td><strong>YTD Totals</strong></td>
                    <td>{{ res_ytd.staffs.total }}</td>
                    <td>{{ res_ytd.active_projects.total }}</td>
                    <td>{{ res_ytd.elicitation_analysis_time.total }}</td>
                    <td>{{ res_ytd.avg_throughput.total }}</td>
                    <td>{{ res_ytd.total_operational_cost.total|prepend_dollars }}</td>
                </tr>
                {% for item in res %}
                    <tr>
                        <td><a href="{% url 'teams:metric_detail' item.id %}?key={{ item.functional_group.key }}">{{ item.created|date:'Y-m-d' }}</a></td>
                        <td draggable="true" ondragstart="drag('re',event)">{{ item.staffs }}</td>
                        <td draggable="true" ondragstart="drag('re',event)">{{ item.active_projects }}</td>
                        <td draggable="true" ondragstart="drag('re',event)">{{ item.elicitation_analysis_time }}</td>
                        <td draggable="true" ondragstart="drag('re',event)">{{ item.avg_throughput }}</td>
                        <td draggable="true" ondragstart="drag('re',event)">{{ item.total_operational_cost|prepend_dollars }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="container">
        <section>
            <div id="requirements_engineering_dnd_div" class="dnd_button_div" ondrop="drop('re',event)" ondragover="allow_drop('re',event)">
                Drag a Table Cell Here
            </div>
        </section>
    </div>

    <br>

    {% comment %}
    <div class="container west_container">
        <section>
            <div class="dataTables_wrapper no-footer table-responsive">
                <div class="dataTables_scroll">
                    <table class="chart_table">
                        <tr id="re_chart_row"></tr>
                    </table>
                </div>
            </div>
        </section>
    </div>
    {% endcomment %}

    {% else %}
        No Contents
    {% endif %}

</div>


{% block endscript %}

<script type="text/javascript">

    var requirements_engineering_table_id = "requirements_engineering_table";
    var requirements_engineering_chart_svg_prefix = "re_chart_svg_";

    var requirements_engineering_primary_date_time_column = 0;
    var requirements_engineering_next_chart_id = 0;

    var requirements_engineering_dnd_charts_list = [];
    var requirements_engineering_dnd_id = "";

    var requirements_engineering_all_column_names_list = [];
    var requirements_engineering_column_details_list = [];

    var requirements_engineering_hide_column_list = [];
    var requirements_engineering_column_data_list_json = '{{ column_data_list | safe }}';

    (function () {

        $(document).ready(function () {
            addIdsToMainTable(requirements_engineering_table_id);
            buildColumnNamesList(requirements_engineering_table_id, requirements_engineering_all_column_names_list, requirements_engineering_column_data_list_json, requirements_engineering_column_details_list);
        });

    })(jQuery);

</script>

{% endblock %}
